function outputRoomName(room){document.getElementById("room-name").innerText=room}function outputUsers(users){$("#users").html(""),users.forEach(user=>{"Nick"!=user.username&&$("#users").append($('<li id="'+user.id+'" style="cursor:pointer" title="'+user.id+'">').text(user.username).hide().fadeIn())})}$((function(){var socket=io.connect("https://www.host-x.de:3000");socket.on("userJoin",(function(msg){null!==window.sessionStorage.getItem("usr")&&null!==window.sessionStorage.getItem("room")&&socket.emit("send-user-and-room-name",{username:window.sessionStorage.getItem("usr"),room:window.sessionStorage.getItem("room")})})),socket.on("roomUsers",({room:room,users:users})=>{outputRoomName(room),outputUsers(users)}),socket.on("message",message=>{outputMessage(message);var obj=document.createElement("audio");obj.src="./assets/audio/beep.mp3",obj.play(),document.querySelector(".chat-messages").scrollTop=document.querySelector(".chat-messages").scrollHeight}),$("#bwChatSystem").on("keydown",(function(e){if("Enter"===e.key){e.preventDefault();var ReceiversSocketId=$("#ReceiversSocketId").val(),path,page=window.location.pathname.split("/").pop();if("chat.html"==page&&(ReceiversSocketId=""),""==ReceiversSocketId&&"operator.html"==page)return void alert("Please choose a user");if(""==$("#m").val())return void("operator.html"==page&&alert("Message can not be empty"));socket.emit("ChatMessageOneToOne",{msg:$("#m").val(),ReceiversSocketId:ReceiversSocketId}),$("#m").val(""),$("#m").attr("placeholder","")}})),null===window.sessionStorage.getItem("usr")&&($("#bwChatSystem").fadeOut(),$("#OperatorContainer").fadeOut(),$(".chat-messages").fadeOut(),$("#loginmaske").fadeIn()),$("#loginmaske").submit((function(e){e.preventDefault();var usr=$("#usr").val(),room=$("#room").val();window.sessionStorage.setItem("usr",usr),window.sessionStorage.setItem("room",room),$("#loginmaske").fadeOut(),$("#OperatorContainer").fadeIn(),$("#bwChatSystem").fadeIn(),$(".chat-messages").fadeIn(),location.reload(),document.getElementById("m").focus()}))}));const chatForm=document.getElementById("chat-form"),chatMessages=document.querySelector(".chat-messages");function outputMessage(message){let class_message="";"ChatBot"==message.username?class_message="operator avatarChatClient":"Nick"==message.username&&(class_message="operator avatarOperator"),$(".chat-messages").append($('<div class="message '+class_message+'"><p class="meta">'+message.username+"<span> "+message.time+'</span></p><p class="text">'+message.text+"</p></div>").hide().fadeIn())}